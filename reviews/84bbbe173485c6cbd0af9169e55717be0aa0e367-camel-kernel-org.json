{
  "thread_id": "84bbbe173485c6cbd0af9169e55717be0aa0e367.camel@kernel.org",
  "subject": "Re: [PATCH 1/1] NFSD: Expose callback statistics in /proc/net/rpc/nfsd",
  "url": "https://lore.kernel.org/all/84bbbe173485c6cbd0af9169e55717be0aa0e367.camel@kernel.org/",
  "dates": {
    "2026-02-21": {
      "report_file": "2026-02-23_ollama_llama3.1-8b.html",
      "developer": "Jeff Layton",
      "reviews": [
        {
          "author": "Chuck Lever",
          "summary": "reviewer noted that the patch introduces a potential deadlock between nfsd4_run_cb() and nfsd4_show_cb_stats() due to shared use of nn->client_lock, and requested the lock be dropped before calling rpc_clnt_show_stats()\n\nReviewer Chuck Lever requested justification for modifying the /proc interface, assuming the intention was to expose the new metrics in an existing NFS administrative tool such as nfsstat.",
          "sentiment": "needs_work",
          "sentiment_signals": [
            "potential deadlock",
            "shared lock",
            "requested justification",
            "assuming intention"
          ],
          "has_inline_review": true,
          "tags_given": [
            "Reviewed-by"
          ],
          "analysis_source": "llm",
          "raw_body": "Hello Dai!\n\nOn Sat, Feb 21, 2026, at 4:57 PM, Dai Ngo wrote:\n\n---\n\nThe commit message needs to justify why you are modifying a legacy\n/proc interface. I assume it is because you want these metrics to\nappear in an existing NFS administrative tool like nfsstat ?",
          "reply_to": "Dai Ngo",
          "message_date": "2026-02-21"
        }
      ],
      "analysis_source": "llm-per-reviewer"
    },
    "2026-02-22": {
      "report_file": "2026-02-23_ollama_llama3.1-8b.html",
      "developer": "Jeff Layton",
      "reviews": [
        {
          "author": "NeilBrown",
          "summary": "Reviewer NeilBrown questioned the decision to expose system-wide callback statistics, suggesting that per-net-namespace counters would be more accurate and useful.",
          "sentiment": "needs_work",
          "sentiment_signals": [
            "requested changes"
          ],
          "has_inline_review": false,
          "tags_given": [
            "Reviewed-by"
          ],
          "analysis_source": "llm",
          "raw_body": "Why system-wide rather than per-net-namespace?\n\nNeilBrown",
          "reply_to": "Dai Ngo",
          "message_date": "2026-02-22"
        },
        {
          "author": "Dai Ngo (author)",
          "summary": "Author Dai Ngo responded to feedback about displaying NFSd statistics, stating they were unaware that /proc is a legacy interface and asking for guidance on the proper way to display these statistics.\n\nAuthor acknowledged that the existing NFS daemon maintains backchannel statistics, but they are not easily accessible; explained that the current patch adds these stats to /proc/net/rpc/nfsd for developer use only and does not plan to extend nfsstat(8) to report them.",
          "sentiment": "neutral",
          "sentiment_signals": [
            "lack of knowledge",
            "request for clarification",
            "acknowledged existing implementation",
            "explained design choice"
          ],
          "has_inline_review": false,
          "tags_given": [],
          "analysis_source": "llm",
          "raw_body": "Oh I did not know /proc is a legacy interface. What is the proper\nway to display nfsd statistics?\n\n---\n\nI should have made this clearer in the commit message.\n\nnfsd already maintains backchannel statistics, but there's currently\nno convenient way to view them during normal operation - developers\ntypically have to inspect a vmcore.\n\nThis patch addresses that gap by adding the backchannel statistics to\nthe existing output of /proc/net/rpc/nfsd.\n\nAt this time, I don't plan to extend nfsstat(8) to report these statistics,\nas this patch is intended for developer use only.\n\n-Dai",
          "reply_to": "Chuck Lever",
          "message_date": "2026-02-22"
        },
        {
          "author": "Dai Ngo (author)",
          "summary": "Author acknowledged that the callback statistics counters are embedded in a globally defined structure, cb_program, rather than in nfsd_net, and asked for clarification on whether this is the correct terminology.",
          "sentiment": "neutral",
          "sentiment_signals": [
            "clarification requested"
          ],
          "has_inline_review": false,
          "tags_given": [],
          "analysis_source": "llm",
          "raw_body": "These counters are currently embedded in cb_program which is defined\nglobally and not in nfsd_net. Am i using the wrong terminology?\n\n-Dai",
          "reply_to": "NeilBrown",
          "message_date": "2026-02-22"
        }
      ],
      "analysis_source": "llm-per-reviewer"
    },
    "2026-02-23": {
      "report_file": "2026-02-23_ollama_llama3.1-8b.html",
      "developer": "Jeff Layton",
      "reviews": [
        {
          "author": "NeilBrown",
          "summary": "Reviewer NeilBrown noted that the patch exports global callback statistics, which he believes is inappropriate and suggested converting the statistics collection to per-net-namespace instead.",
          "sentiment": "needs_work",
          "sentiment_signals": [
            "requested changes"
          ],
          "has_inline_review": false,
          "tags_given": [
            "Reviewed-by"
          ],
          "analysis_source": "llm",
          "raw_body": "Sorry - I hadn't properly processed that these are existing statistics\nand you are only exporting them.\n\nSo I change my comment to: please don't do that.  I don't think it is\nappropriate to export global statistics.  We should only export\nper-net-namespace statistics.\n\nSo place convert the statistics collect to per-net-namespace, then\nexport them.\n\nThanks,\nNeilBrown",
          "reply_to": "Dai Ngo",
          "message_date": "2026-02-23"
        },
        {
          "author": "Jeff Layton",
          "summary": "reviewer suggested using netlink commands instead of /proc/net/rpc/nfsd to expose callback statistics, citing its extensibility and ease of use compared to proc files",
          "sentiment": "needs_work",
          "sentiment_signals": [
            "requested changes"
          ],
          "has_inline_review": false,
          "tags_given": [
            "Reviewed-by"
          ],
          "analysis_source": "llm",
          "raw_body": "We have a new netlink commands for nfsd that give us request status. It\nwould be good to either extend that or add a new command that allows\nstatistics.Â  Netlink is much better suited for this since it's a lot\neasier to extend than dealing with procfiles.",
          "reply_to": "Dai Ngo",
          "message_date": "2026-02-23"
        }
      ],
      "analysis_source": "llm-per-reviewer"
    }
  }
}