{
  "thread_id": "b3c1c739c233ccb32945ccaffdaf25fd3f96dd59.camel@surriel.com",
  "subject": "[PATCH 2/5] mm: rmap: add a ZONE_DEVICE folio warning in folio_referenced()",
  "url": "https://lore.kernel.org/all/b3c1c739c233ccb32945ccaffdaf25fd3f96dd59.camel@surriel.com/",
  "dates": {
    "2026-02-24": {
      "report_file": "2026-02-24.html",
      "developer": "Rik van Riel",
      "reviews": [
        {
          "author": "Baolin Wang",
          "summary": "Yes, sounds reasonable. Will do in next version. Thanks for reviewing.",
          "sentiment": "neutral",
          "sentiment_signals": [],
          "has_inline_review": true,
          "tags_given": [],
          "analysis_source": "heuristic",
          "raw_body": "\n\nOn 2/24/26 10:38 AM, Rik van Riel wrote:\n> On Tue, 2026-02-24 at 09:56 +0800, Baolin Wang wrote:\n>>\n>> diff --git a/mm/rmap.c b/mm/rmap.c\n>> index bff8f222004e..be785dfc9336 100644\n>> --- a/mm/rmap.c\n>> +++ b/mm/rmap.c\n>> @@ -1065,6 +1065,7 @@ int folio_referenced(struct folio *folio, int\n>> is_locked,\n>>  \t\t.invalid_vma = invalid_folio_referenced_vma,\n>>  \t};\n>>   \n>> +\tVM_WARN_ON_FOLIO(folio_is_zone_device(folio), folio);\n>>  \t*vm_flags = 0;\n>>  \tif (!pra.mapcount)\n>>  \t\treturn 0;\n> \n> Should be a VM_WARN_ON_ONCE_FOLIO so we do not cause\n> a softlockup if we try to print information about a\n> million ZONE_DEVICE pages?\n\nYes, sounds reasonable. Will do in next version. Thanks for reviewing.\n",
          "reply_to": "",
          "message_date": "2026-02-24",
          "message_id": ""
        }
      ],
      "analysis_source": "heuristic"
    },
    "2026-02-25": {
      "report_file": "2026-02-24.html",
      "developer": "Rik van Riel",
      "reviews": [
        {
          "author": "David (Arm)",
          "summary": "Feel free to add my",
          "sentiment": "neutral",
          "sentiment_signals": [],
          "has_inline_review": true,
          "tags_given": [
            "Acked-by"
          ],
          "analysis_source": "heuristic",
          "raw_body": "On 2/24/26 06:49, Baolin Wang wrote:\n> \n> \n> On 2/24/26 10:38 AM, Rik van Riel wrote:\n>> On Tue, 2026-02-24 at 09:56 +0800, Baolin Wang wrote:\n>>>\n>>> diff --git a/mm/rmap.c b/mm/rmap.c\n>>> index bff8f222004e..be785dfc9336 100644\n>>> --- a/mm/rmap.c\n>>> +++ b/mm/rmap.c\n>>> @@ -1065,6 +1065,7 @@ int folio_referenced(struct folio *folio, int\n>>> is_locked,\n>>>  .invalid_vma = invalid_folio_referenced_vma,\n>>>  };\n>>>  + VM_WARN_ON_FOLIO(folio_is_zone_device(folio), folio);\n>>>  *vm_flags = 0;\n>>>  if (!pra.mapcount)\n>>>  return 0;\n>>\n>> Should be a VM_WARN_ON_ONCE_FOLIO so we do not cause\n>> a softlockup if we try to print information about a\n>> million ZONE_DEVICE pages?\n> \n> Yes, sounds reasonable. Will do in next version. Thanks for reviewing.\n\nFeel free to add my\n\nAcked-by: David Hildenbrand (Arm) <david@kernel.org>\n\nto that.\n\n-- \nCheers,\n\nDavid\n",
          "reply_to": "",
          "message_date": "2026-02-25",
          "message_id": ""
        }
      ],
      "analysis_source": "heuristic"
    }
  }
}