{
  "thread_id": "20260217185335.21013-1-mark@harmstone.com",
  "subject": "[PATCH] btrfs: fix error message in btrfs_validate_super()",
  "url": "https://lore.kernel.org/all/20260217185335.21013-1-mark@harmstone.com/",
  "dates": {
    "2026-02-18": {
      "report_file": "2026-02-18_ollama_llama3.1-8b.html",
      "developer": "Mark Harmstone",
      "reviews": [
        {
          "author": "Qu Wenruo",
          "summary": "在 2026/2/18 05:23, Mark Harmstone 写道:",
          "sentiment": "neutral",
          "sentiment_signals": [],
          "has_inline_review": true,
          "tags_given": [
            "Reviewed-by"
          ],
          "analysis_source": "heuristic",
          "raw_body": "\n\n在 2026/2/18 05:23, Mark Harmstone 写道:\n> Fix the superblock offset mismatch error message in\n> btrfs_validate_super(): we changed it so that it considers all the\n> superblocks, but the message still assumes we're only looking at the\n> first one.\n> \n> The change from %u to %llu is because we're changing from a constant to\n> a u64.\n> \n> Signed-off-by: Mark Harmstone <mark@harmstone.com>\n> Fixes: 069ec957c35e (\"btrfs: Refactor btrfs_check_super_valid\")\n\nReviewed-by: Qu Wenruo <wqu@suse.com>\n\nThanks,\nQu\n\n> ---\n>   fs/btrfs/disk-io.c | 4 ++--\n>   1 file changed, 2 insertions(+), 2 deletions(-)\n> \n> diff --git a/fs/btrfs/disk-io.c b/fs/btrfs/disk-io.c\n> index 600287ac8eb7..f39008591631 100644\n> --- a/fs/btrfs/disk-io.c\n> +++ b/fs/btrfs/disk-io.c\n> @@ -2533,8 +2533,8 @@ int btrfs_validate_super(const struct btrfs_fs_info *fs_info,\n>   \n>   \tif (unlikely(mirror_num >= 0 &&\n>   \t\t     btrfs_super_bytenr(sb) != btrfs_sb_offset(mirror_num))) {\n> -\t\tbtrfs_err(fs_info, \"super offset mismatch %llu != %u\",\n> -\t\t\t  btrfs_super_bytenr(sb), BTRFS_SUPER_INFO_OFFSET);\n> +\t\tbtrfs_err(fs_info, \"super offset mismatch %llu != %llu\",\n> +\t\t\t  btrfs_super_bytenr(sb), btrfs_sb_offset(mirror_num));\n>   \t\tret = -EINVAL;\n>   \t}\n>   \n\n",
          "reply_to": "",
          "message_date": "2026-02-18",
          "message_id": ""
        }
      ],
      "analysis_source": "heuristic",
      "patch_summary": "Fix the superblock offset mismatch error message in btrfs_validate_super(): we changed it so that it considers all the superblocks, but the message still assumes we're only looking at the first one.\n\nThe change from %u to %llu is because we're changing from a constant to a u64."
    },
    "2026-02-24": {
      "report_file": "2026-02-24.html",
      "developer": "Mark Harmstone",
      "reviews": [
        {
          "author": "David Sterba",
          "summary": "FYI I've edited the subjects of the error message fixing patches to be more specific what is being fixed now that there are a few of them.",
          "sentiment": "neutral",
          "sentiment_signals": [],
          "has_inline_review": true,
          "tags_given": [],
          "analysis_source": "heuristic",
          "raw_body": "On Tue, Feb 17, 2026 at 06:53:19PM +0000, Mark Harmstone wrote:\n> Fix the superblock offset mismatch error message in\n> btrfs_validate_super(): we changed it so that it considers all the\n> superblocks, but the message still assumes we're only looking at the\n> first one.\n> \n> The change from %u to %llu is because we're changing from a constant to\n> a u64.\n> \n> Signed-off-by: Mark Harmstone <mark@harmstone.com>\n> Fixes: 069ec957c35e (\"btrfs: Refactor btrfs_check_super_valid\")\n\nFYI I've edited the subjects of the error message fixing patches to be\nmore specific what is being fixed now that there are a few of them.\n\n",
          "reply_to": "",
          "message_date": "2026-02-24",
          "message_id": ""
        }
      ],
      "analysis_source": "heuristic",
      "patch_summary": "Fix the superblock offset mismatch error message in btrfs_validate_super(): we changed it so that it considers all the superblocks, but the message still assumes we're only looking at the first one.\n\nThe change from %u to %llu is because we're changing from a constant to a u64."
    }
  }
}