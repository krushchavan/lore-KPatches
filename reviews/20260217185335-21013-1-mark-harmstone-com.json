{
  "thread_id": "20260217185335.21013-1-mark@harmstone.com",
  "subject": "[PATCH] btrfs: fix error message in btrfs_validate_super()",
  "url": "https://lore.kernel.org/all/20260217185335.21013-1-mark@harmstone.com/",
  "dates": {
    "2026-02-17": {
      "report_file": "2026-02-17_ollama_llama3.1-8b.html",
      "developer": "Mark Harmstone",
      "reviews": [
        {
          "author": "Qu Wenruo",
          "summary": "Approved the patch with minor formatting changes to the error message. The change from %u to %llu correctly handles u64 values.",
          "sentiment": "positive",
          "sentiment_signals": [
            "minor formatting changes"
          ],
          "has_inline_review": false,
          "tags_given": [
            "Reviewed-by"
          ],
          "analysis_source": "llm",
          "raw_body": "\n\n在 2026/2/18 05:23, Mark Harmstone 写道:\n> Fix the superblock offset mismatch error message in\n> btrfs_validate_super(): we changed it so that it considers all the\n> superblocks, but the message still assumes we're only looking at the\n> first one.\n> \n> The change from %u to %llu is because we're changing from a constant to\n> a u64.\n> \n> Signed-off-by: Mark Harmstone <mark@harmstone.com>\n> Fixes: 069ec957c35e (\"btrfs: Refactor btrfs_check_super_valid\")\n\nReviewed-by: Qu Wenruo <wqu@suse.com>\n\nThanks,\nQu\n\n> ---\n>   fs/btrfs/disk-io.c | 4 ++--\n>   1 file changed, 2 insertions(+), 2 deletions(-)\n> \n> diff --git a/fs/btrfs/disk-io.c b/fs/btrfs/disk-io.c\n> index 600287ac8eb7..f39008591631 100644\n> --- a/fs/btrfs/disk-io.c\n> +++ b/fs/btrfs/disk-io.c\n> @@ -2533,8 +2533,8 @@ int btrfs_validate_super(const struct btrfs_fs_info *fs_info,\n>   \n>   \tif (unlikely(mirror_num >= 0 &&\n>   \t\t     btrfs_super_bytenr(sb) != btrfs_sb_offset(mirror_num))) {\n> -\t\tbtrfs_err(fs_info, \"super offset mismatch %llu != %u\",\n> -\t\t\t  btrfs_super_bytenr(sb), BTRFS_SUPER_INFO_OFFSET);\n> +\t\tbtrfs_err(fs_info, \"super offset mismatch %llu != %llu\",\n> +\t\t\t  btrfs_super_bytenr(sb), btrfs_sb_offset(mirror_num));\n>   \t\tret = -EINVAL;\n>   \t}\n>   \n\n\n"
        }
      ],
      "analysis_source": "llm"
    },
    "2026-02-18": {
      "report_file": "2026-02-18_ollama_llama3.1-8b.html",
      "developer": "Mark Harmstone",
      "reviews": [
        {
          "author": "Qu Wenruo",
          "summary": "Approved the patch with a Reviewed-by tag, noting no specific technical concerns were raised.",
          "sentiment": "positive",
          "sentiment_signals": [],
          "has_inline_review": false,
          "tags_given": [
            "Reviewed-by"
          ],
          "analysis_source": "llm",
          "raw_body": "\n\n在 2026/2/18 05:23, Mark Harmstone 写道:\n> Fix the superblock offset mismatch error message in\n> btrfs_validate_super(): we changed it so that it considers all the\n> superblocks, but the message still assumes we're only looking at the\n> first one.\n> \n> The change from %u to %llu is because we're changing from a constant to\n> a u64.\n> \n> Signed-off-by: Mark Harmstone <mark@harmstone.com>\n> Fixes: 069ec957c35e (\"btrfs: Refactor btrfs_check_super_valid\")\n\nReviewed-by: Qu Wenruo <wqu@suse.com>\n\nThanks,\nQu\n\n> ---\n>   fs/btrfs/disk-io.c | 4 ++--\n>   1 file changed, 2 insertions(+), 2 deletions(-)\n> \n> diff --git a/fs/btrfs/disk-io.c b/fs/btrfs/disk-io.c\n> index 600287ac8eb7..f39008591631 100644\n> --- a/fs/btrfs/disk-io.c\n> +++ b/fs/btrfs/disk-io.c\n> @@ -2533,8 +2533,8 @@ int btrfs_validate_super(const struct btrfs_fs_info *fs_info,\n>   \n>   \tif (unlikely(mirror_num >= 0 &&\n>   \t\t     btrfs_super_bytenr(sb) != btrfs_sb_offset(mirror_num))) {\n> -\t\tbtrfs_err(fs_info, \"super offset mismatch %llu != %u\",\n> -\t\t\t  btrfs_super_bytenr(sb), BTRFS_SUPER_INFO_OFFSET);\n> +\t\tbtrfs_err(fs_info, \"super offset mismatch %llu != %llu\",\n> +\t\t\t  btrfs_super_bytenr(sb), btrfs_sb_offset(mirror_num));\n>   \t\tret = -EINVAL;\n>   \t}\n>   \n\n\n"
        }
      ],
      "analysis_source": "llm"
    }
  }
}