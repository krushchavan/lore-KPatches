{
  "thread_id": "aZ2zPzyoFUUNWdJ7@linux.dev",
  "subject": "[PATCH] mm: allow __GFP_RETRY_MAYFAIL in vmalloc",
  "url": "https://lore.kernel.org/all/aZ2zPzyoFUUNWdJ7@linux.dev/",
  "dates": {
    "2026-02-24": {
      "report_file": "2026-02-24.html",
      "developer": "Shakeel Butt",
      "reviews": [
        {
          "author": "Christoph Hellwig",
          "summary": "That is a good point.  Compared to other options documenting that it might would still seem like the best option after just not using __GFP_RETRY_MAYFAIL with vmalloc.",
          "sentiment": "neutral",
          "sentiment_signals": [],
          "has_inline_review": true,
          "tags_given": [],
          "analysis_source": "heuristic",
          "raw_body": "On Tue, Feb 24, 2026 at 06:22:15AM -0800, Shakeel Butt wrote:\n> > Why bother?  __GFP_RETRY_MAYFAIL has pretty lose semantics.  Trying\n> > too hard to allocate PTEs is not breaking the overall concept.\n> > \n> \n> One thing __GFP_RETRY_MAYFAIL is very clear about is to not trigger the\n> oom-killer which is not the case for GFP_KERNEL. There are users who explicitly\n> use __GFP_RETRY_MAYFAIL to avoid oom-killer.\n\nThat is a good point.  Compared to other options documenting that it\nmight would still seem like the best option after just not using\n__GFP_RETRY_MAYFAIL with vmalloc.\n\n\n",
          "reply_to": "",
          "message_date": "2026-02-24",
          "message_id": ""
        },
        {
          "author": "Michal Hocko",
          "summary": "yes https://lore.kernel.org/all/32bd9bed-a939-69c4-696d-f7f9a5fe31d8@redhat.com/T/#u",
          "sentiment": "neutral",
          "sentiment_signals": [],
          "has_inline_review": true,
          "tags_given": [],
          "analysis_source": "heuristic",
          "raw_body": "On Tue 24-02-26 06:22:15, Shakeel Butt wrote:\n> On Tue, Feb 24, 2026 at 06:03:13AM -0800, Christoph Hellwig wrote:\n> > On Tue, Feb 24, 2026 at 01:22:36PM +0100, Michal Hocko wrote:\n> > > One thing that we could do to improve __GFP_RETRY_MAYFAIL resp.\n> > > __GFP_NORETRY is to use NOWAIT allocation semantic for page table\n> > > allocations as those could be achieved by scoped allocation context.\n> > > This could cause pre-mature failure after the whole bunch of memory has\n> > > already been allocated for the backing pages but considering that page\n> > > table allocations should be more and more rare over system runtime it\n> > > might be just a reasonable workaround. WDYT?\n> > \n> > Why bother?  __GFP_RETRY_MAYFAIL has pretty lose semantics.  Trying\n> > too hard to allocate PTEs is not breaking the overall concept.\n> > \n> \n> One thing __GFP_RETRY_MAYFAIL is very clear about is to not trigger the\n> oom-killer which is not the case for GFP_KERNEL. There are users who explicitly\n> use __GFP_RETRY_MAYFAIL to avoid oom-killer.\n> \n> Mikulas, is that the reason you are using __GFP_RETRY_MAYFAIL in your use-case?\n\nyes https://lore.kernel.org/all/32bd9bed-a939-69c4-696d-f7f9a5fe31d8@redhat.com/T/#u\n-- \nMichal Hocko\nSUSE Labs\n\n",
          "reply_to": "",
          "message_date": "2026-02-24",
          "message_id": ""
        }
      ],
      "analysis_source": "heuristic"
    }
  }
}